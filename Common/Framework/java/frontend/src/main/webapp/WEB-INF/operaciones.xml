<?xml version="1.0" ?>
<!DOCTYPE entity [
  <!ELEMENT entity        (operacion*)>
  <!ELEMENT operacion     (input* , output* , dataset* , tables*, transformer?, forms)>
  
  <!ELEMENT input		  (campoEntrada*)>
  <!ELEMENT forms		  (form*)>
  <!ELEMENT output		  (campoSalida)>
  <!ELEMENT transformer	  EMPTY>


  <!ELEMENT campoEntrada  (input*|campoEntrada*)>  
  <!ELEMENT campoSalida   (campoSalida*,output*)>  
  
  <!ELEMENT dataset       (campo*)>
  <!ELEMENT campo         EMPTY>
  <!ELEMENT tables       (tableDef+)>
  <!ELEMENT tableDef     (campoTable*)>
  <!ELEMENT campoTable   EMPTY>
  
  
  <!ATTLIST transformer clase           CDATA #REQUIRED>
  
  <!ATTLIST form name	CDATA #REQUIRED>
  
  <!ATTLIST input name           	 	CDATA    #IMPLIED>
  <!ATTLIST input keyName           	CDATA    #IMPLIED>
  <!ATTLIST input clase           	 	CDATA    #IMPLIED>
  <!ATTLIST input fieldID           	CDATA    #IMPLIED>
  <!ATTLIST input nombreEntidad        	CDATA    #IMPLIED>
  
  <!ATTLIST campoEntrada name			CDATA #IMPLIED>
  <!ATTLIST campoEntrada clase			CDATA #IMPLIED>
  <!ATTLIST campoEntrada nombreEntidad	CDATA #IMPLIED>
  <!ATTLIST campoEntrada metodo			CDATA #IMPLIED>
  <!ATTLIST campoEntrada oid_fac		CDATA #IMPLIED>
 
  <!ATTLIST output name					CDATA #REQUIRED> 
  <!ATTLIST output tableName           	CDATA #REQUIRED><!-- va a representar el nombre de la tabla -->

  <!ATTLIST campoSalida name			CDATA #REQUIRED> <!-- De la forma como esta hecha en el framework anterior...y como quieren mantener esas cosas, esto es super necesario xq si no tiene el tag name, siempre pone los tags en la misma key, q es NULL -->
  <!ATTLIST campoSalida tableName		CDATA #IMPLIED> <!-- en caso de ser hijo de otro campoSalida, es una tabla, y este campo tendra el nombre de la tabla -->
  <!ATTLIST campoSalida target			CDATA #IMPLIED> <!-- El nombre del metodo para recuperar los datos -->
  <!ATTLIST campoSalida value			CDATA #IMPLIED> <!-- el valor de la columna que contendra el valor de resltado de target -->

  <!ATTLIST operacion name              ID    #REQUIRED>
  <!ATTLIST operacion clase             CDATA #IMPLIED>
  <!ATTLIST operacion entidad           CDATA #IMPLIED>
  <!ATTLIST operacion XMLWriter         CDATA #IMPLIED>
  <!ATTLIST operacion redirect          CDATA #IMPLIED>
  <!ATTLIST operacion usaJMS            CDATA #IMPLIED>
  
  <!ATTLIST dataset name                CDATA #REQUIRED>
  <!ATTLIST dataset value               CDATA #IMPLIED>
  <!ATTLIST dataset tabla               CDATA #IMPLIED>
  
  <!ATTLIST campo   name                CDATA #REQUIRED>
  <!ATTLIST campo   value               CDATA #IMPLIED>
  
  <!ATTLIST tableDef    name           	CDATA #REQUIRED>

  <!ATTLIST campoTable	name        	CDATA #REQUIRED>
  <!ATTLIST campoTable  orden       	CDATA #IMPLIED>
  <!ATTLIST campoTable  tipo        	CDATA #IMPLIED>
  <!ATTLIST campoTable  longitud    	CDATA #IMPLIED>
  
]>

<entity>






	<operacion name="TraerConfigAbmGenerico" clase="com.jkt.operaciones.RecuperarEstructura">
		
		<output name="mtConfigOper" tableName="mtConfigOper">
			<campoSalida name="resultado">
				<campoSalida name="operSave" value="operSave" target="operSave" />
				<campoSalida name="operTraer" value="operTraer" target="operTraer" />
			</campoSalida>
		</output>		

		<output name="mtConfigCampos" tableName="mtConfigCampos">
			<campoSalida name="resultado">
				<campoSalida name="fieldName" value="fieldName" target="fieldName" />
				<campoSalida name="tipo" value="tipo" target="tipo" />
				<campoSalida name="longitud" value="longitud" target="longitud" />
				<campoSalida name="visible" value="visible" target="visible" />
				<campoSalida name="readOnly" value="readOnly" target="readOnly" />
				<campoSalida name="orden" value="orden" target="orden" />
				<campoSalida name="label" value="label" target="label" />
			</campoSalida>
		</output>
		
		<output name="mtConfigValidador" tableName="mtConfigValidador">
			<campoSalida name="resultado">
				<campoSalida name="fieldName" value="fieldName" target="fieldName" />
				<campoSalida name="tipoValidacion" value="tipoValidacion" target="tipoValidacion" />
				<campoSalida name="entidad" value="entidad" target="entidad" />
				<campoSalida name="oidName" value="oidName" target="oidName" />
				<campoSalida name="descrName" value="descrName" target="descrName" />
			</campoSalida>
		</output>
		
		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer"></transformer>
			
		<forms>
			<form name="form"></form>
		</forms>
		
	</operacion>







	<!-- GUARDAR O ACTUALIZAR EL MENU -->
	<operacion name="GenerarMenu" clase="com.jkt.operaciones.CrearMenues">
		
		<output name="resultado" tableName="TUsuarios">
			<campoSalida name="resultado">
			</campoSalida>
		</output>		
			
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	
<!-- 	RECUPERAR MENU PARA ERP -->

	<operacion name="TrearMenuERP" clase="com.jkt.operaciones.erp.RecuperarMenuParaERP">
		
		<output name="resultado" tableName="TMenu">
			<campoSalida name="resultado">
				<campoSalida name="oid_menu" value="oid_menu" target="value" />
			</campoSalida>
		</output>		

		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
			
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	<!-- RECUPERAR EL MENU -->
	<operacion name="TrearMenu" clase="com.jkt.operaciones.RecuperarMenu">
		
		<output name="TCabecera" tableName="TCabecera">
			<campoSalida name="resultado">
				<campoSalida name="oid_menu" value="oid_menu" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="Descripcion" value="Descripcion" target="descripcion" />
				<campoSalida name="Tipo" value="Tipo" target="tipoMenu" />

				<campoSalida name="Imagen" value="Imagen" target="imagen" />
				<campoSalida name="RutaDeImagen" value="RutaDeImagen" target="rutaDeImagen" />
				<campoSalida name="Orden" value="Orden" target="orden" />
				<campoSalida name="Argumento" value="Argumento" target="argumento" />
				
			</campoSalida>
		</output>
		
		<output name="TMenues" tableName="TMenues">
			<campoSalida name="resultado">
				<campoSalida name="oid_menu" value="oid_menu" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="Descripcion" value="Descripcion" target="descripcion" />
				<campoSalida name="Tipo" value="Tipo" target="tipoMenu" />

				<campoSalida name="Imagen" value="Imagen" target="imagen" />
				<campoSalida name="RutaDeImagen" value="RutaDeImagen" target="rutaDeImagen" />
				<campoSalida name="Orden" value="Orden" target="orden" />
				<campoSalida name="Argumento" value="Argumento" target="argumento" />
				
			</campoSalida>
		</output>		
		
		<output name="TTextosMenues" tableName="TTextosMenues">
			<campoSalida name="resultado">
				<campoSalida name="oid_menu" value="oid_menu" target="oidMenu" />
				<campoSalida name="texto" value="texto" target="texto" />
				<campoSalida name="alineacion" value="alineacion" target="alineacion" />
				<campoSalida name="tamanio" value="tamanio" target="tamanio" />
				<campoSalida name="fuente" value="fuente" target="fuente" />
			</campoSalida>
		</output>
			
		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer"></transformer>
			
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>






	<!-- 	VALIDAR IN EXISTENCIA -->
	<operacion name="ValidarInexistente" clase="com.jkt.operaciones.ValidarInexistencia">
		
		<output name="resultado" tableName="TUsuarios">
			<campoSalida name="resultado">
			</campoSalida>
		</output>		
			
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
			
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>


	<!-- 	VALIDAR EXISTENCIA -->
	<operacion name="ValidarExistente" clase="com.jkt.operaciones.ValidarExistencia">
		
		<output name="resultado" tableName="TUsuarios">
			<campoSalida name="resultado">
				<campoSalida name="oid" value="oid" target="id" />
				<campoSalida name="Descripcion" value="Descripcion" target="cadena2" />
				<campoSalida name="Cadena" value="Cadena" target="cadena" />
			</campoSalida>
		</output>		
			
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>





	<!-- 	RECUPERAR USUARIOS -->
	<operacion name="TraerUsuarios" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.dominio.Usuario">
		
		<input name="parametro1" keyName="objeto" clase="com.jkt.dominio.Container" fieldID='oid_usuario'>
			<campoEntrada >
				<campoEntrada nombreEntidad="com.jkt.dominio.Empresa" />
			</campoEntrada>
		</input>
					
		<output name="resultado" tableName="TUsuarios">
			<campoSalida name="resultado">
				<campoSalida name="oid_usuario" value="oid_usuario" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="Activo" value="Activo" target="activo" />
				<campoSalida name="Nombre" value="Nombre" target="nombres" />
				<campoSalida name="Apellido" value="Apellido" target="apellido" />
				<campoSalida name="Email" value="Email" target="mail" />
			</campoSalida>
		</output>		
			
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	<!-- 	TRAE TODAS LAS EMPRESAS Y TODOS LOS USUARIOS -->
	<operacion name="TraerUsuariosYEmpresas" clase="com.jkt.operaciones.RecuperarEmpresasYUsuarios">
					
		<output name="TUsuarios" tableName="TUsuarios">
			<campoSalida name="resultado">
				<campoSalida name="oid_usuario" value="oid_usuario" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="Activo" value="Activo" target="activo" />
				<campoSalida name="Nombre" value="Nombre" target="nombres" />
				<campoSalida name="Apellido" value="Apellido" target="apellido" />
				<campoSalida name="Email" value="Email" target="mail" />
			</campoSalida>
		</output>	
		
		<output name="TUsuarioEmpresas" tableName="TUsuarioEmpresas">
			<campoSalida name="resultado">
				<campoSalida name="oid_empresa" value="oid_empresa" target="oidEmpresa" />
				<campoSalida name="oid_usuario" value="oid_usuario" target="oidUsuario" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="RazonSocial" value="RazonSocial" target="razonSocial" />
				<campoSalida name="Activo" value="Activo" target="activo" />
			</campoSalida>
		</output>		
		
		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	<!-- 	RECUPERAR EMPRESAS DE USUARIO -->
	<operacion name="TraerEmpresasDeUsuario" clase="com.jkt.operaciones.RecuperarEmpresasDeUsuario">
					
		<output name="TUsuario" tableName="TUsuario">
			<campoSalida name="resultado">
				<campoSalida name="oid_usuario" value="oid_usuario" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="Activo" value="Activo" target="activo" />
				<campoSalida name="Nombre" value="Nombre" target="nombres" />
				<campoSalida name="Apellido" value="Apellido" target="apellido" />
				<campoSalida name="Email" value="Email" target="mail" />
			</campoSalida>
		</output>	
		
		<output name="TEmpresas" tableName="TEmpresas">
			<campoSalida name="resultado">
				<campoSalida name="oid_empresa" value="oid_empresa" target="id" />
				<campoSalida name="oid_usuario" value="oid_usuario" target="oidUsuario" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="RazonSocial" value="RazonSocial" target="razonSocial" />
				<campoSalida name="UrlDB" value="UrlDB" target="urlDB" />
				<campoSalida name="Activo" value="Activo" target="activo" />
			</campoSalida>
		</output>		
			
		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	<!-- 	RECUPERAR EMPRESAS -->
	<operacion name="TraerEmpresas" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.dominio.Empresa">
		
		<input name="parametro1" keyName="objeto" clase="com.jkt.dominio.Container" fieldID='oid_empresa'>
			
			<campoEntrada>
				<campoEntrada nombreEntidad="com.jkt.dominio.Empresa" />
			</campoEntrada>
			
		</input>
					
		<output name="resultado" tableName="TEmpresas">
			<campoSalida name="resultado">
				<campoSalida name="oid_empresa" value="oid_empresa" target="id" />
				<campoSalida name="Codigo" value="Codigo" target="codigo" />
				<campoSalida name="RazonSocial" value="RazonSocial" target="razonSocial" />
				<campoSalida name="UrlDB" value="UrlDB" target="urlDB" />
				<campoSalida name="Activo" value="Activo" target="activo" />
			</campoSalida>
		</output>		
			
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TEmpresa"></form>
		</forms>
		
	</operacion>

	
	
	<!-- GUARDAR EMPRESA -->
	<operacion name="GuardarEmpresa" clase="com.jkt.operaciones.GuardarLista">
		<input name="TEmpresas" keyName="objeto" clase="com.jkt.dominio.Empresa" fieldID='oid_empresa'>
			<campoEntrada>
				
				<!-- Campo simple -->
				<campoEntrada name="Codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="RazonSocial" clase="String" metodo="setRazonSocial" />
				<campoEntrada name="UrlDB" clase="String" metodo="setUrlDB" />
				<campoEntrada name="Activo" clase="Boolean" metodo="setActivo" />

			</campoEntrada>
			
		</input>
		
		<forms>
			<form name="TUsuario"></form>
			<form name="TLogin"></form>
		</forms>

	</operacion>
	
	<!-- 	GUARDAR USUARIO -->
	<operacion name="GuardarUsuario" clase="com.jkt.operaciones.Guardar">
		<input name="TUsuarios" keyName="objeto" clase="com.jkt.dominio.Usuario" fieldID='oid_usuario'>
			<campoEntrada >
				
				<campoEntrada name="Codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="Nombre" clase="String" metodo="setNombres" />
				<campoEntrada name="Apellido" clase="String" metodo="setApellido" />
				<campoEntrada name="Email" clase="String" metodo="setMail" />
				<campoEntrada name="Activo" clase="Boolean" metodo="setActivo" />
				
				<campoEntrada name="password" metodo="addPassword" clase="com.jkt.dominio.HistorialPassword"> 
					<campoEntrada name="password" clase="ByteArray" metodo="setPassword" />
				</campoEntrada>

			</campoEntrada>
		</input>
		
		<output name="resultado" tableName="tabla">
			<campoSalida name="objeto1" />
		</output>		
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
	
	<!-- 	ACTUALIZAR PASSWORD DE USUARIO -->
	<operacion name="actualizarPassword" clase="com.jkt.operaciones.ActualizarPassword">
		<input name="TUsuarios" keyName="objeto" clase="com.jkt.dominio.Usuario" fieldID='oid_usuario'>
			<campoEntrada>
				<campoEntrada name="password" clase="String" metodo="setPassword" />
			</campoEntrada>
		</input>
		
		<output name="resultado" tableName="tabla">
			<campoSalida name="objeto1">
			</campoSalida>
		</output>		
		
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
	</operacion>
	
	<!-- 	GUARDAR USUARIO Y UNA EMPRESA ASOCIADA -->
	<operacion name="agregarEmpresa" clase="com.jkt.operaciones.Guardar">
		<input name="usuario" keyName="objeto" clase="com.jkt.dominio.Usuario" fieldID='oid'>
		
			<campoEntrada name="Codigo" clase="String" metodo="setCodigo" />
			<campoEntrada name="Nombre" clase="String" metodo="setNombres" />
			<campoEntrada name="Apellido" clase="String" metodo="setApellido" />
			<campoEntrada name="Email" clase="String" metodo="setMail" />
			<campoEntrada name="Activo" clase="Boolean" metodo="setActivo" />
			
			<campoEntrada>
				<campoEntrada name="empresa" metodo="addEmpresa" clase="com.jkt.dominio.Empresa" />
			</campoEntrada>
		</input>
		
<!-- 		<output name="resultado" tableName="TUsuario"> -->
<!-- 			<campoSalida name="objeto1"> -->
<!-- 				<campoSalida name="campoParaMostrar1" value="campoParaMostrarEnLaSalida" target="codigo" /> -->
<!-- 			</campoSalida> -->
<!-- 		</output>		 -->
		
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
	</operacion>
	
	<!-- LOGIN -->
	<operacion name="Login" clase="com.jkt.operaciones.Login">
		<input name="TLogin" keyName="login">
<!-- 		<input name="TLogin" keyName="login" clase="com.jkt.dominio.Login"> -->
<!-- 			<campoEntrada> -->

<!-- 				<campoEntrada name="usuario" clase="String" metodo="setUsuario" /> -->
<!-- 				<campoEntrada name="password" clase="String" metodo="setPassword" /> -->

<!-- 			</campoEntrada> -->
			
		</input>
		
		<output name="resultado" tableName="TUsuario">
			<campoSalida name="objeto1">
				<campoSalida name="oid_usuario" value="oid_usuario" target="id" />
				<campoSalida name="nombres" value="nombres" target="nombres" />
				<campoSalida name="apellido" value="apellido" target="apellido" />
				<campoSalida name="mail" value="mail" target="mail" />
				<campoSalida name="codigo" value="codigo" target="userName" />
			</campoSalida>
		</output>
		
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
		
	</operacion>
</entity>
