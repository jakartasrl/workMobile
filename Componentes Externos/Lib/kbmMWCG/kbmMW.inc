{$IFDEF FPC}         // FreePascal
  {$mode delphi}{$H+} 
  {$DEFINE LEVEL5}
  {$DEFINE LEVEL6}
  {$DEFINE LEVEL7}
  {$DEFINE LEVEL9}
  {$DEFINE LEVEL10}
  {$DEFINE DELPHI}
{$ENDIF}

{$IFDEF VER100}      // Delphi 3
 {$DEFINE LEVEL3}
 {$DEFINE DELPHI}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER110}      // C++ Builder 3
 {$DEFINE LEVEL3}
 {$DEFINE BCB}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER120}      // Delphi 4
 {$DEFINE LEVEL4}
 {$DEFINE DELPHI}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER125}      // C++ Builder 4
 {$DEFINE LEVEL4}
 {$DEFINE BCB}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER130}      // Delphi 5 or Builder 5
 {$DEFINE LEVEL4}
 {$DEFINE LEVEL5}
 {$IFNDEF BCB}        // Delphi 5
  {$DEFINE DELPHI}
 {$ELSE}              // Builder 5
  {$UNDEF DELPHI}	     // ( Ensure Delphi off )
 {$ENDIF}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER140}      // Delphi 6/Kylix.
 {$DEFINE LEVEL4}
 {$DEFINE LEVEL5}
 {$DEFINE LEVEL6}
 {$IFNDEF BCB}        // Delphi 6
  {$DEFINE DELPHI}
 {$ELSE}              // Builder 6
  {$UNDEF DELPHI}	     // ( Ensure Delphi off )
 {$ENDIF}
 {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER150}      // Delphi 7.
  {$DEFINE LEVEL4}
  {$DEFINE LEVEL5}
  {$DEFINE LEVEL6}
  {$DEFINE LEVEL7}
  {$IFNDEF BCB}        // Delphi 7
    {$DEFINE DELPHI}
  {$ELSE}              // Builder 7
    {$UNDEF DELPHI}	     // ( Ensure Delphi off )
  {$ENDIF}
  {$IFDEF LINUX}
    Sorry this level of Kylix not yet supported.
  {$ENDIF}
  {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER170}      // Delphi 2005.
  {$DEFINE LEVEL4}
  {$DEFINE LEVEL5}
  {$DEFINE LEVEL6}
  {$DEFINE LEVEL7}
  {$DEFINE LEVEL9}
  {$IFNDEF BCB}        // Delphi 2005
    {$DEFINE DELPHI}
  {$ELSE}
    {$UNDEF DELPHI}	     // ( Ensure Delphi off )
  {$ENDIF}
  {$IFDEF LINUX}
    Sorry this level of Kylix not yet supported.
  {$ENDIF}
  {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF VER180}      // Delphi 2006.
  {$DEFINE LEVEL4}
  {$DEFINE LEVEL5}
  {$DEFINE LEVEL6}
  {$DEFINE LEVEL7}
  {$DEFINE LEVEL9}
  {$DEFINE LEVEL10}
  {$IFNDEF BCB}        // Delphi 2006
    {$DEFINE DELPHI}
  {$ELSE}
    {$UNDEF DELPHI}	     // ( Ensure Delphi off )
  {$ENDIF}
  {$IFDEF LINUX}
    Sorry this level of Kylix not yet supported.
  {$ENDIF}
  {$DEFINE CPUX86}
{$ENDIF}

{$IFDEF CONDITIONALEXPRESSIONS}
  {$IF CompilerVersion >= 18.5} // Spacely / Delphi 2007 for Win32
    {$DEFINE SPACELY_UP}
    {$DEFINE LEVEL4}
    {$DEFINE LEVEL5}
    {$DEFINE LEVEL6}
    {$DEFINE LEVEL7}
    {$DEFINE LEVEL9}
    {$DEFINE LEVEL10}
    {$DEFINE LEVEL11}
    {$DEFINE CPUX86}
  {$IFEND}

  {$IF CompilerVersion >= 19.0} // CodeGear RAD Studio 2007 for Win32/.Net
    {$DEFINE HIGHLANDER_UP}
    {$DEFINE LEVEL12}
  {$IFEND}

  {$IF CompilerVersion >= 20}   // Tiburon / Delphi 2009
    {$DEFINE TIBURON_UP}
    {$DEFINE LEVEL13}
  {$IFEND}

  {$IF CompilerVersion >= 21}   // Weaver / Delphi 2010
    {$DEFINE WEAVER_UP}
    {$DEFINE LEVEL14}
  {$IFEND}

  {$IF CompilerVersion >= 22}   // Fulcrum / Delphi XE
    {$DEFINE FULCRUM_UP}
    {$DEFINE LEVEL15}
  {$IFEND}

  {$IF CompilerVersion >= 23}   // Pulsar / Delphi XE2
    {$DEFINE PULSAR_UP}
    {$DEFINE LEVEL16}
  {$IFEND}

  {$ifndef BCB}
    {$DEFINE DELPHI}
  {$else}
    {$UNDEF DELPHI}	     // ( Ensure Delphi off )
  {$endif}
{$ENDIF}

{$IFDEF CLR}
¨ Sorry... dotNet is not supported
  {$DEFINE DOTNET}
  {$UNSAFECODE OFF}
{$ENDIF}

{$IFDEF LEVEL6}
 {$IFNDEF FPC}
  {$DEFINE KBMMW_SUPPORTSFTFMTBCD}
  {$DEFINE KBMMW_SUPPORTSFTBCD}
 {$ENDIF}
{$ENDIF}

{$IFDEF LEVEL10}
 {$DEFINE KBMMW_SUPPORTFTWIDECHAR}
 {$DEFINE KBMMW_SUPPORTFTWIDEMEMO}
 {$DEFINE KBMMW_SUPPORTASWIDESTRING}
 {$DEFINE KBMMW_SUPPORTFTFIXEDWIDECHAR}
{$ENDIF}

{$IFDEF LEVEL11}
 {$DEFINE KBMMW_SUPPORTINLINE}
{$ENDIF}

{$IFDEF LEVEL13}
 {$DEFINE KBMMW_UNICODESTRINGS}
 {$DEFINE KBMMW_SUPPORTSENCODING}
 {$DEFINE KBMMW_SUPPORTSvarUString}
 {$DEFINE KBMMW_SUPPORTFTBYTE}
 {$DEFINE KBMMW_SUPPORTFTSHORTINT}
 {$DEFINE KBMMW_SUPPORTFTLONGWORD}
 {$DEFINE KBMMW_SUPPORTASBLOBBYTEARRAY}
 {$DEFINE KBMMW_SUPPORTFTEXTENDED}
 {$DEFINE KBMMW_ASBLOBISBYTES}
 {$DEFINE KBMMW_SUPPORTASBYTES}
 {$DEFINE KBMMW_SUPPORTASANSISTRING}
{$ENDIF}

{$IFDEF LEVEL14}
 {$DEFINE KBMMW_SUPPORTASLARGEINT}
{$ENDIF}

//***********************************************************************

{$IFDEF BCB}
 {$ObjExportAll On}
 {$ASSERTIONS ON}
 {$define CPP}
{$ENDIF}

{$IFDEF LEVEL7}
 {$IFNDEF DOTNET}
  {$WARN UNSAFE_CODE OFF}
  {$WARN UNSAFE_TYPE OFF}
  {$WARN UNSAFE_CAST OFF}
 {$ENDIF}
{$ENDIF}

{$IFDEF LEVEL6}
 {$WARN SYMBOL_PLATFORM OFF}
 {$WARN SYMBOL_DEPRECATED OFF}
 {$WARN UNIT_PLATFORM OFF}
 {$WARN UNIT_DEPRECATED OFF}
{$ENDIF}

{$B-}    // Enable short circuit evaluation.

{$I kbmMWConfig.inc}

{$IFDEF KBMMW_FREEWARE_EDITION}
 {$DEFINE KBMMW_LEVEL_1}
 {$DEFINE KBMMW_EDITION_DEFINED}
{$ELSE}
 {$IFDEF KBMMW_STANDARD_EDITION}
  {$DEFINE KBMMW_LEVEL_2}
  {$DEFINE KBMMW_LEVEL_1}
  {$DEFINE KBMMW_EDITION_DEFINED}
 {$ELSE}
  {$IFDEF KBMMW_CODEGEAR_EDITION}
   {$DEFINE KBMMW_LEVEL_CODEGEAR}
   {$DEFINE KBMMW_LICENSE_CONNECTIONPOOL}
   {$DEFINE KBMMW_LICENSE_DATABASE}
   {$DEFINE KBMMW_LICENSE_PROXYSERVICE}
   {$DEFINE KBMMW_LICENSE_STATS}
   {$IFNDEF DOTNET}
    {$DEFINE KBMMW_LICENSE_XML}
    {$DEFINE KBMMW_LICENSE_SOAP}
    {$DEFINE KBMMW_LICENSE_ISAPI}
   {$ENDIF}
   {$DEFINE KBMMW_LICENSE_HTTP_TRANSPORT}
   {$DEFINE KBMMW_LICENSE_INDY_TRANSPORTS}
   {$DEFINE KBMMW_EDITION_DEFINED}
  {$ELSE}
   {$IFDEF KBMMW_PRO_EDITION}
    {$DEFINE KBMMW_LEVEL_3}
    {$DEFINE KBMMW_LEVEL_2}
    {$DEFINE KBMMW_LEVEL_1}
    {$DEFINE KBMMW_EDITION_DEFINED}
   {$ELSE}
    {$IFDEF KBMMW_PROPLUS_EDITION}
     {$DEFINE KBMMW_LEVEL_4}
     {$DEFINE KBMMW_LEVEL_3}
     {$DEFINE KBMMW_LEVEL_2}
     {$DEFINE KBMMW_LEVEL_1}
     {$DEFINE KBMMW_EDITION_DEFINED}
    {$ELSE}
     {$IFDEF KBMMW_ENTERPRISE_EDITION}
      {$DEFINE KBMMW_LEVEL_5}
      {$DEFINE KBMMW_LEVEL_4}
      {$DEFINE KBMMW_LEVEL_3}
      {$DEFINE KBMMW_LEVEL_2}
      {$DEFINE KBMMW_LEVEL_1}
      {$DEFINE KBMMW_EDITION_DEFINED}
     {$ENDIF}
    {$ENDIF}
   {$ENDIF}
  {$ENDIF}
 {$ENDIF}
{$ENDIF}

{$IFDEF WIN32}
 {$DEFINE WINDOWS}
{$ENDIF}
{$IFDEF WIN64}
 {$DEFINE WINDOWS}
{$ENDIF}
{$IFDEF MACOS}
 {$DEFINE FMX}
{$ENDIF}

{$IFNDEF KBMMW_EDITION_DEFINED}
 'Please define correct kbmMW edition in kbmMWConfig.inc:'
   KBMMW_FREEWARE_EDITION
   KBMMW_STANDARD_EDITION
   KBMMW_CODEGEAR_EDITION
   KBMMW_PRO_EDITION
   KBMMW_PROPLUS_EDITION
   KBMMW_ENTERPRISE_EDITION
{$ENDIF}

{$IFDEF KBMMW_LEVEL_5}
 {$IFNDEF DOTNET}
  {$IFDEF WIN32}
   {$DEFINE KBMMW_LICENSE_PERFMONSTATS}
  {$ENDIF}
//   {$DEFINE KBMMW_LICENSE_IOCP_TRANSPORTS}
 {$ENDIF}
// {$DEFINE KBMMW_LICENSE_FILESTOREMESSAGEQUEUE}
 {$DEFINE KBMMW_LICENSE_STREAMSEC_SSHSAF_TRANSPORTS}
 {$DEFINE KBMMW_LICENSE_HTTPSERVICE}
 {$DEFINE KBMMW_LICENSE_AMF3}
 {$DEFINE KBMMW_LICENSE_RTMP_GATEWAY}
 {$DEFINE KBMMW_LICENSE_REMOTEDESKTOP}
{$ENDIF}
{$IFDEF KBMMW_LEVEL_4}
 {$DEFINE KBMMW_LICENSE_MESSAGING}
 {$DEFINE KBMMW_LICENSE_FILESTOREMESSAGEQUEUE}
 {$DEFINE KBMMW_LICENSE_JAVASERVICE}
 {$DEFINE KBMMW_LICENSE_ACTIONSCRIPTSERVICE}
 {$DEFINE KBMMW_LICENSE_LOADBALANCING}
 {$DEFINE KBMMW_LICENSE_RTMP_TRANSPORTS}
{$ENDIF}
{$IFDEF KBMMW_LEVEL_3}
 {$DEFINE KBMMW_LICENSE_DBADAPTERWIZARD}
 {$DEFINE KBMMW_LICENSE_CONNECTIONPOOL}
 {$DEFINE KBMMW_LICENSE_DATABASE}
 {$DEFINE KBMMW_LICENSE_FILESERVICE}
 {$DEFINE KBMMW_LICENSE_PROXYSERVICE}
 {$DEFINE KBMMW_LICENSE_RB_DADE}
 {$DEFINE KBMMW_LICENSE_STATS}
 {$DEFINE KBMMW_LICENSE_STREAMSEC}
 {$DEFINE KBMMW_LICENSE_AJAX}
 {$DEFINE KBMMW_LICENSE_WEB}
 {$IFNDEF DOTNET}
  {$DEFINE KBMMW_LICENSE_ISAPI}
  {$DEFINE KBMMW_LICENSE_KBMMEMTABLE_PRO}
 {$ENDIF}
{$ENDIF}
{$IFDEF KBMMW_LEVEL_2}
 {$IFNDEF DOTNET}
  {$DEFINE KBMMW_LICENSE_XML}
  {$DEFINE KBMMW_LICENSE_SOAP}
 {$ENDIF}
 {$DEFINE KBMMW_LICENSE_DXSOCKS_TRANSPORTS}
 {$DEFINE KBMMW_LICENSE_NEXUSDB_TRANSPORTS}
{$ENDIF}
{$IFDEF KBMMW_LEVEL_1}
 {$DEFINE KBMMW_LICENSE_HTTP_TRANSPORT}
 {$DEFINE KBMMW_LICENSE_ZIPPED_TRANSPORT}
 {$DEFINE KBMMW_LICENSE_INDY_TRANSPORTS}
 {$DEFINE KBMMW_LICENSE_SYNAPSE_TRANSPORTS}
{$ENDIF}

{$IFDEF KBMMW_LICENSE_KBMMEMTABLE_PRO}
 {$IFDEF KBMMW_SUPPORT_KBMMEMTABLE_PRO}
  {$IFNDEF LINUX}
   {$DEFINE USE_FAST_STRINGCOMPARE}
   {$IFDEF LEVEL6}
    {$DEFINE USE_FAST_MOVE}
   {$ENDIF}
   {$DEFINE USE_FAST_LIST}
  {$ENDIF}
 {$ENDIF}
{$ENDIF}

{$IFDEF KBMMW_AMF3_TRANSPORTSTREAM_SUPPORT}
 {$DEFINE KBMMW_AS3_UTILITIES}
{$ELSE}
 {$IFDEF KBMMW_ACTIONSCRIPT_SERVICE_SUPPORT}
  {$DEFINE KBMMW_AS3_UTILITIES}
 {$ENDIF}
{$ENDIF}

{$IFDEF KBMMW_MANAGEMENT_CONSOLE}
 {$I kbmMWPostConfig.inc}
{$ENDIF}

