<zk viewModel="@id('vm') @load(viewModel)"  >

	<vlayout>
		
		<panel sclass="panel-maestro" style="overflow:hidden;padding:5px;" title="Datos Generales" border="normal" width="61%" >

			<panelchildren>
			
				<grid width="auto" >

					<columns>
						<column width="120px"/>
						<column width="130px"/>
						<column width="130px"/>
						<column width="160px"/>
						<column width="160px"/>
						<column width="100px"/>
					</columns>
			
					<rows>
					
						<row sclass="fila-maestro">
							<label value="Fecha Emision : " />
							<datebox id="fechaHoraEmision" value="@bind(vm.protocoloOV.fechaHoraEmision)" format="dd/MM/yyyy" onCreate="self.value = new Date()" readonly="true"/>
							<label value="Fecha de muestra : " />
							<datebox id="fechaHoraMuestra" value="@bind(vm.protocoloOV.fechaHoraMuestra)" format="dd/MM/yyyy" onCreate="self.value = new Date()" readonly="true"/>
						</row>

						<row>
							<label value="Nro. de Pedido : " />
								
							<hlayout>
								<textbox sclass="campoCodigo-medium" value="@bind(vm.pedidoOV.nro)" onBlur="@command('validarCampo', clase='pedido', codigo=self.value, ov=vm.pedidoOV, post='traerDeterminaciones')" />
								<button label="..." onClick="@command('openHelper', clase='pedido', ov=vm.pedidoOV, post='traerDeterminaciones')"  />
							</hlayout>

							<label value="Orden de Trabajo : " />
							
							<hlayout>
								<textbox width="100%" value="@bind(vm.protocoloOV.ordenTrabajo)"  />
<!-- 								<button label="..." /> -->
							</hlayout>
	
						</row>
						
			    		<row>
							<label value="Cliente | Sucursal : " />
							
							<hlayout>
								<textbox sclass="campoCodigo-medium" value="@bind(vm.clienteOV.codigo)"  onBlur="@command('validarCampo', clase='clientes', codigo=self.value, ov=vm.clienteOV, post='actualizarCamposDependientesDeCliente')" />
								<button label="..." onClick="@command('openHelper', clase='clientes', ov=vm.clienteOV, post='actualizarCamposDependientesDeCliente')" />
							</hlayout>

							<hlayout>
								<textbox sclass="campoCodigo-vsmall" value="@bind(vm.sucursalOV.codigo)"  onBlur="@command('validarCampo', clase='clienteSucursal', codigo=self.value, ov=vm.sucursalOV, post='actualizarCampoSucursal')" />
								<button label="..." onClick="@command('openHelper', clase='clienteSucursal',  ov=vm.sucursalOV , oidEntidadMaestra= vm.clienteOV.id, post='actualizarCampoSucursal' )" />
							</hlayout>

							<cell colspan="3">
								<textbox value="@bind(vm.sucursalOV.descripcionCompleta)" width="100%" readonly="true" />
							</cell>
			    		</row>
												
						<row>
							<label value="Equipo : " />
							<hlayout>
								<textbox sclass="campoCodigo-large" value="@bind(vm.equipoOV.codigo)"  onBlur="@command('validarCampo', clase='equipo', codigo=self.value, ov=vm.equipoOV, post='')"  />
								<button label="..." onClick="@command('openHelper', clase='equipo', ov=vm.equipoOV, post='')"  />
							</hlayout>
							
							<button width="90%" style="margin-left:5px" label="Nuevo Equipo" onClick="@command('abrirNuevo')" />
														
							<cell colspan="3">
								<textbox width="100%" readonly="true" value="@bind(vm.equipoOV.descripcion)"  />
							</cell>
						</row>

<!-- 						<row> -->
<!-- 							<label value="Fecha Aprobacion : " visible="${vm.modoAprobacion}" /> -->
<!-- 							<datebox width="100%" id="fechaHoraAprobacion" value="@bind(vm.protocoloOV.fechaAprobacion)"  format="dd/MM/yyyy  hh:mm:ss" readonly="true" visible="${vm.modoAprobacion}" /> -->
<!-- 							<label value="Fecha Finalizacion : " visible="${vm.modoAprobacion}" /> -->
<!-- 							<datebox width="100%" id="fechaHoraFinalizacion" value="@bind(vm.protocoloOV.fechaFinalizacion)"  format="dd/MM/yyyy  hh:mm:ss" readonly="true" visible="${vm.modoAprobacion}" />	 -->
<!-- 						</row> -->
					</rows>
				
				</grid>
				
			</panelchildren>
			
		</panel>
		
		<panel style="margin-top:1px;" border="none" height="auto" width="45%">
		
			<panelchildren>
			
				<tabbox id="contenidoTabs" >
				
			    	<tabs id="tabs">
			        	<tab id="determinaciones" 		label="Determinaciones" />
			        	<tab id="diagnosticoFinal" 		label="Diagnostico Final" />
			    	</tabs>
			    	
			    	<tabpanels>
			    			        
			    			        
			    			        	
			        	<tabpanel>
							<include id="determinacionesContent" hflex="1" src="/pantallas/protocolo/protocolo-determinaciones.zul" viewModel="${vm}"/>
			        	</tabpanel>
			        
			        	<tabpanel>
							<include id="diagnosticoFinalContent" hflex="1" src="/pantallas/protocolo/protocolo-diagnosticoFinal.zul" viewModel="${vm}" />
						</tabpanel>
										
			    	</tabpanels>
			    
				</tabbox>
			
			</panelchildren>
		
		</panel>
				
	</vlayout>

</zk>