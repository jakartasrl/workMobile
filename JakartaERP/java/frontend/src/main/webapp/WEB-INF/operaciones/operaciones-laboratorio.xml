<?xml version="1.0" standalone="yes"?>
<!DOCTYPE entity [

  <!ELEMENT entity        (operacion*)>
  <!ELEMENT operacion     (input* , output* , listas? , dataset* , tables*, transformer?, forms)>
<!--   <!ELEMENT operacion     (input* , output* , dataset* , tables*, transformer?, forms)> -->
  
  <!ELEMENT input		  (campoEntrada*)>	<!--   Es la entrada de la operacion. Lo definido aquí llegará en un mapa a la operacion -->
  <!ELEMENT forms		  (form*)>		  	<!--   Para definir una restriccion y conocer que clients utilizan esta operacion. Es a modo de mantenimiento, por ejemplo: al cambiar una operacion, se debe saber quienes suelen llamar a la operacion para realizar los debidos cambios -->
  <!ELEMENT output		  (campoSalida*)> 	<!--   Define el formato de salida -->
  <!ELEMENT transformer	  EMPTY>			<!--   Define una clase que es la encargada de mostrar los resultados en la salida de la operacion. (Muchas tablas, una sola, en paralelo) -->
  
  <!ELEMENT listas		  (lista*)>			<!--   Son las listas para mostrar en la salida-->

  <!ELEMENT lista  (lista*)>  
  <!ATTLIST lista nombreWriter		CDATA    #REQUIRED>
  <!ATTLIST lista nombreLista       CDATA    #REQUIRED>


  <!ELEMENT campoEntrada  (input*|campoEntrada*)>  
  <!ELEMENT campoSalida   (campoSalida*,output*)>  
  
  <!ELEMENT dataset       (campo*)>
  <!ELEMENT campo         EMPTY>
  <!ELEMENT tables       (tableDef+)>
  <!ELEMENT tableDef     (campoTable*)>
  <!ELEMENT campoTable   EMPTY>
  
  <!ATTLIST transformer clase           CDATA #REQUIRED>
  
  <!ATTLIST form name	CDATA #REQUIRED>
  
  <!ATTLIST input name           	 	CDATA    #IMPLIED><!--   Nombre que se corresponde con la entrada de delphi. Si en delphi mandan el valor Name, acá debe exstir en valor Name para obtener los demas datos -->
  <!ATTLIST input keyName           	CDATA    #IMPLIED><!--   Indica el key del mapa que llega a la operacion. Si el valor es 'leo', se debera recuperar usando la key 'leo' sobre el mapa en la operacion -->
  <!ATTLIST input clase           	 	CDATA    #IMPLIED><!-- 	define la clase del parmetro recibido -->
  <!ATTLIST input fieldID           	CDATA    #IMPLIED><!--   Define que atributo sera utilizado como id de la entida, esto es para recuperarlo de la base, si acá el valor es UN_ID, en delphi deberian mandar el valor UN_ID -->
  <!ATTLIST input nombreEntidad        	CDATA    #IMPLIED>
  
  <!ATTLIST campoEntrada name			CDATA #IMPLIED>
  <!ATTLIST campoEntrada clase			CDATA #IMPLIED>
  <!ATTLIST campoEntrada nombreEntidad	CDATA #IMPLIED>
  <!ATTLIST campoEntrada metodo			CDATA #IMPLIED>
  <!ATTLIST campoEntrada fieldID        CDATA #IMPLIED><!--   Define que atributo sera utilizado como id de la entida, esto es para recuperarlo de la base, si acá el valor es UN_ID, en delphi deberian mandar el valor UN_ID -->
 
  <!ATTLIST output name					CDATA #REQUIRED> 
  <!ATTLIST output tableName           	CDATA #REQUIRED><!-- va a representar el nombre de la tabla -->

  <!ATTLIST campoSalida tableName		CDATA #IMPLIED> <!-- en caso de ser hijo de otro campoSalida, es una tabla, y este campo tendra el nombre de la tabla -->
  <!ATTLIST campoSalida target			CDATA #IMPLIED> <!-- El nombre del metodo para recuperar los datos -->
  <!ATTLIST campoSalida value			CDATA #IMPLIED> <!-- el valor de la columna que contendra el valor de resltado de target -->

  <!ATTLIST operacion name              ID    #REQUIRED>
  <!ATTLIST operacion clase             CDATA #IMPLIED>
  <!ATTLIST operacion entidad           CDATA #IMPLIED>
  <!ATTLIST operacion XMLWriter         CDATA #IMPLIED>
  <!ATTLIST operacion redirect          CDATA #IMPLIED>
  <!ATTLIST operacion usaJMS            CDATA #IMPLIED>
  
  <!ATTLIST dataset name                CDATA #REQUIRED>
  <!ATTLIST dataset value               CDATA #IMPLIED>
  <!ATTLIST dataset tabla               CDATA #IMPLIED>
  
  <!ATTLIST campo   name                CDATA #REQUIRED>
  <!ATTLIST campo   value               CDATA #IMPLIED>
  
  <!ATTLIST tableDef    name           	CDATA #REQUIRED>

  <!ATTLIST campoTable	name        	CDATA #REQUIRED>
  <!ATTLIST campoTable  orden       	CDATA #IMPLIED>
  <!ATTLIST campoTable  tipo        	CDATA #IMPLIED>
  <!ATTLIST campoTable  longitud    	CDATA #IMPLIED>
  
]>

<entity>

	<!-- Persistir instancias de LABORATORIO -->
	<operacion name="SaveLaboratorio" clase="com.jkt.operaciones.GuardarLista">
		<input name="mtInput" keyName="objeto"
			clase="com.jkt.laboratorio.dominio.Laboratorio" fieldID='oid'>
			<campoEntrada>
				<campoEntrada name="codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="descr" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
			</campoEntrada>
		</input>

		<forms>
			<form name="TLaboratorio"></form>
		</forms>

	</operacion>

	<!-- Traer instancias de LABORATORIO -->
	<operacion name="TraerLaboratorio" clase="com.jkt.operaciones.TraerEntidades"
		entidad="com.jkt.laboratorio.dominio.Laboratorio">
		<output name="resultado" tableName="mtInput">
			<campoSalida value="oid" target="id" />
			<campoSalida value="codigo" target="codigo" />
			<campoSalida value="descr" target="descripcion" />
			<campoSalida value="activo" target="isActivo" />
		</output>

		<transformer clase="com.jkt.transformers.SimpleTransformer" />

		<forms>
			<form name="TLaboratorio"></form>
		</forms>
	</operacion>

	<!-- Persistir instancias de Tabla de Validación -->
	<operacion name="SaveTablaValDeter" clase="com.jkt.operaciones.GuardarLista">
		<input name="mtInput" keyName="objeto" clase="com.jkt.laboratorio.dominio.TablaValidacionDeter" fieldID='oid_tabla'>
			<campoEntrada>
				<campoEntrada name="codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="descr" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
			</campoEntrada>
		</input>

		<forms>
			<form name="TLaboratorio"></form>
		</forms>
	</operacion>

	<!-- Traer instancias de Tablas de Validación -->
	<operacion name="TraerTablaValDeter" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.TablaValidacionDeter">
		<output name="resultado" tableName="mtInput">
			<campoSalida value="oid_tabla" target="id" />
			<campoSalida value="codigo" target="codigo" />
			<campoSalida value="descr" target="descripcion" />
			<campoSalida value="activo" target="isActivo" />
		</output>

		<transformer clase="com.jkt.transformers.SimpleTransformer" />

		<forms>
			<form name="TLaboratorio"></form>
		</forms>
	</operacion>


	<!-- Persistir instancias de Valores de Tablas de Validación -->
	<operacion name="SaveValoresTablaValidacion" clase="com.jkt.operaciones.GuardarLista">
		<input name="mtInput" keyName="objeto" clase="com.jkt.laboratorio.dominio.ValoresTablaValidacion" fieldID='oid_valor_tabla'>
			<campoEntrada>
				<campoEntrada name="codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="descr" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
				<campoEntrada name="oid_tabla" clase="com.jkt.laboratorio.dominio.TablaValidacionDeter" metodo="setTablaValidacion" />
			</campoEntrada>
		</input>

		<forms>
			<form name="TLaboratorio"></form>
		</forms>
	</operacion>

	<!-- Traer lista de Valores de Tablas de Validación -->
	<operacion name="TraerValoresTablaValidacion" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.ValoresTablaValidacion">
		<output name="resultado" tableName="mtInput">
			<campoSalida value="oid_valor_tabla" target="id" />
			<campoSalida value="codigo" target="codigo" />
			<campoSalida value="descr" target="descripcion" />
			<campoSalida value="activo" target="isActivo" />
			<campoSalida value="oid_tabla" target="tablaValidacion.id" />
			<campoSalida value="cod_tabla" target="tablaValidacion.codigo" />
			<campoSalida value="des_tabla" target="tablaValidacion.descripcion" />
		</output>


		<transformer clase="com.jkt.transformers.SimpleTransformer" />

		<forms>
			<form name="TLaboratorio"></form>
		</forms>
	</operacion>

	<!-- Persistir instancias de Análiss y sus Determinaciones -->
	<operacion name="SaveAnalisis" clase="com.jkt.operaciones.Guardar">
		<input name="TCab" keyName="objeto" clase="com.jkt.laboratorio.dominio.Analisis" fieldID="oid_ana">
			<campoEntrada>
				<campoEntrada name="cod_ana" clase="String" metodo="setCodigo" />
				<campoEntrada name="des_ana" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
				<campoEntrada name="oid_lab" clase="com.jkt.laboratorio.dominio.Laboratorio" metodo="setLaboratorio" />

				<campoEntrada name="TDet" metodo="addDeterminacion" clase="com.jkt.laboratorio.dominio.AnalisisDet" fieldID="oid_detalle">
					<campoEntrada name="oid_det" clase="com.jkt.laboratorio.dominio.Determinacion" metodo="setDeterminacion" />
					<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
				</campoEntrada>
			</campoEntrada>
		</input>

		<forms>
			<form name="TAnalisis"></form>
		</forms>

	</operacion>

	<operacion name="TraerAnalisis" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.Analisis">

		<output name="resultado" tableName="TCab">
			<campoSalida value="oid_ana" target="id" />
			<campoSalida value="cod_ana" target="codigo" />
			<campoSalida value="des_ana" target="descripcion" />
			<campoSalida value="oid_lab" target="laboratorio.id" />
			<campoSalida value="activo"  target="isActivo" />
		</output>

		<output name="detalle" tableName="TDet">
			<campoSalida value="oid_detalle"   	target="id" />
			<campoSalida value="oid_det"   		target="determinacion.id" />
			<campoSalida value="cod_det"   		target="determinacion.codigo" />
			<campoSalida value="des_det"   		target="determinacion.descripcion" />
			<campoSalida value="activo"    		target="isActivo" />		
			<campoSalida value="oid_ana"   		target="analisis.id" />
		</output>

		
		<listas>
			<lista nombreLista="listaDeterminaciones" nombreWriter="detalle"  />
		</listas>

		<transformer clase="com.jkt.transformers.SimpleTransformer" />

		<forms>
			<form name="TEmpresa"></form>
		</forms>

	</operacion>




	<operacion name="TraerDeterminaciones"
		clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.Determinacion">

		<output name="resultado" tableName="TDet">
			<campoSalida value="oid_det" 	target="id" />
			<campoSalida value="cod_det" 	target="codigo" />
			<campoSalida value="des_det" 	target="descripcion" />
			<campoSalida value="tipo_res" 	target="tipoResultado" />
			<campoSalida value="activo" 	target="isActivo" />
			<campoSalida value="oid_lab" 	target="laboratorio.id" />
			<campoSalida value="calc_res" 	target="isCalculaResultado" />
			<campoSalida value="formato" 	target="formato" />
			<campoSalida value="ley_cero" 	target="leyendaValorCero" />
			<campoSalida value="oid_lab" 	target="laboratorio.id" />
		</output>

		<output name="metodo" tableName="TMet">
			<campoSalida value="oid_det"   target="determinacion.id" />
			<campoSalida value="oid_met"   target="id" />
			<campoSalida value="metodo"    target="metodo" />
			<campoSalida value="expresion" target="expresionResultado" />
			<campoSalida value="activo"    target="isActivo" />		
		</output>

		<output name="valores" tableName="TVal">
			<campoSalida value="oid_met"     target="metodo.id" />
			<campoSalida value="oid_val"     target="id" />
			<campoSalida value="oid_carac"   target="caracteristica.id" />
			<campoSalida value="valor_desde" target="valorDesde" />
			<campoSalida value="valor_hasta" target="valorHasta" />
			<campoSalida value="limite"      target="limite" />
		</output>
		
		<output name="variables" tableName="TVar">
			<campoSalida value="oid_det"     target="determinacion.id" />
			<campoSalida value="oid_var"     target="id" />
			<campoSalida value="cod_var"     target="codigo" />
			<campoSalida value="des_var"     target="descripcion" />
			<campoSalida value="activo"      target="activo" />
		</output>
		
		
		
		<listas>
			<lista nombreLista="metodos"  nombreWriter="metodo"> 
				<lista nombreLista="valoresEsperados" nombreWriter="valores" />
			</lista>	
			<lista nombreLista="variables" nombreWriter="variables"  />
		</listas>

		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer" />

		<forms>
			<form name="TEmpresa"></form>
		</forms>

	</operacion>

	<operacion name="SaveDeterminaciones" clase="com.jkt.operaciones.Guardar">
		<input name="TDet" keyName="objeto"
			clase="com.jkt.laboratorio.dominio.Determinacion" fieldID="oid_det">
			<campoEntrada>
				<campoEntrada name="cod_det" clase="String" metodo="setCodigo" />
				<campoEntrada name="des_det" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
				<campoEntrada name="tipo_res" clase="String" metodo="setTipoResultado" />
				<campoEntrada name="oid_lab" clase="com.jkt.laboratorio.dominio.Laboratorio" metodo="setLaboratorio" />
				<campoEntrada name="calc_res" clase="Boolean" metodo="setCalculaResultado" />
				<campoEntrada name="formato" clase="String" metodo="setFormato" />
				<campoEntrada name="ley_cero" clase="String" metodo="setLeyendaValorCero" />

				<campoEntrada name="TMet" metodo="addMetodo" clase="com.jkt.laboratorio.dominio.Metodo" fieldID="oid_met">
					<campoEntrada name="metodo" clase="String" metodo="setMetodo" />
					<campoEntrada name="expresion" clase="String" metodo="setExpresionResultado" />
					<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />

					<campoEntrada name="TVal" metodo="addValorEsperado" clase="com.jkt.laboratorio.dominio.ValorEsperado" fieldID="oid_val">
						<campoEntrada name="valor_desde" clase="Double" metodo="setValorDesde" />
						<campoEntrada name="valor_hasta" clase="Double" metodo="setValorHasta" />
						<campoEntrada name="limite" clase="String" metodo="setLimite" />
						<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
						<campoEntrada name="oid_carac" clase="com.jkt.erp.articulos.CaracteristicaProducto" metodo="setCaracteristica" />
					</campoEntrada>

					
				</campoEntrada>
				<campoEntrada name="TVar" metodo="addVariable" clase="com.jkt.laboratorio.dominio.Variable" fieldID="oid_var">
						<campoEntrada name="cod_var" clase="String" metodo="setCodigo" />
						<campoEntrada name="des_var" clase="String" metodo="setDescripcion" />
						<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
				</campoEntrada>


			</campoEntrada>
		</input>

		<forms>
			<form name="TAnalisis"></form>
		</forms>

	</operacion>


	<operacion name="ValidarExpresion" clase="com.jkt.laboratorio.operaciones.ValidarExpresion">
		
		<output name="resultado" tableName="TVariWrk">
			<campoSalida value="codigo" target="codigo" />
		</output>		
			
		<transformer clase="com.jkt.transformers.SimpleTransformer"></transformer>
		
		<forms>
			<form name="TUsuario"></form>
		</forms>
	
	</operacion>


<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->
<!-- 	NUEVAS OPERACIONES DEL MODULO DE LABORATORIO. -->

	<operacion name="GuardarEquipo" clase="com.jkt.operaciones.Guardar">
		<input name="tablaEquipo" keyName="objeto" clase="com.jkt.laboratorio.dominio.Equipo" fieldID="oid_equipo">
			<campoEntrada>
				<campoEntrada name="codigoEquipo" clase="String" metodo="setCodigo" />
				<campoEntrada name="descripcionEquipo" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />

				<campoEntrada name="nroSerie" clase="String" metodo="setNroSerie" />
				<campoEntrada name="oid_cliente" clase="com.jkt.erp.varios.Cliente" metodo="setCliente" />
				<campoEntrada name="oid_valor_tabla" clase="com.jkt.erp.articulos.ValoresTablas" metodo="setMarca" />
				<campoEntrada name="oid_tipo_producto" clase="com.jkt.erp.articulos.TipoProducto" metodo="setTipoDeProducto" />

				<campoEntrada name="tablaCaracteristicas" metodo="agregarCaracteristicas" clase="com.jkt.laboratorio.dominio.EquipoCaracteristica" fieldID="oid_caracteristica">

					<campoEntrada name="oid_caracteristica_producto" clase="com.jkt.erp.articulos.CaracteristicaProducto" metodo="setCaracProducto" />
					<campoEntrada name="oid_valor_tabla" clase="com.jkt.erp.articulos.ValoresTablas" metodo="setValorTabla" />

					<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
					
					<campoEntrada name="valorString" clase="String" metodo="setValorString" />
					<campoEntrada name="valorEntero" clase="Integer" metodo="setValorEntero" />
					<campoEntrada name="valorDoble" clase="Double" metodo="setValorDoble" />
					<campoEntrada name="valorBoolean" clase="Boolean" metodo="setValorBoolean" />

				</campoEntrada>
				
			</campoEntrada>
		</input>

		<forms>
			<form name="FormEquipo"></form>
		</forms>

	</operacion>
	
	<!-- Recuperar todos los equipos del sistema -->
	<operacion name="TraerEquipo" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.Equipo">
		
		<output name="resultado" tableName="tablaEquipo">
			<campoSalida value="oid_equipo" target="id" />
			
			<campoSalida value="codigo_equipo" target="codigo" />
			<campoSalida value="descripcion_equipo" target="codigo" />
			<campoSalida value="nro_serie" target="nroSerie" />

			<campoSalida value="oid_marca" target="marca.id" />
			<campoSalida value="codigo_marca" target="marca.codigo" />
			<campoSalida value="descripcion_marca" target="marca.descripcion" />

			<campoSalida value="oid_cliente" target="marca.id" />
			<campoSalida value="codigo_cliente" target="cliente.codigo" />
			<campoSalida value="descripcion_cliente" target="cliente.descripcion" />

			<campoSalida value="oid_tipo_producto" target="tipoProducto.id" />
			<campoSalida value="codigo_tipo_producto" target="tipoProducto.codigo" />
			<campoSalida value="descripcion_tipo_producto" target="tipoProducto.descripcion" />

		</output>	
		
		<output name="tablaCaracteristicas" tableName="tablaCaracteristicas">
			<campoSalida value="oid_caracteristica" target="id" />
			
			<campoSalida value="oid_valor_tabla" target="valorTabla.id" />
			<campoSalida value="codigo_valor_tabla" target="valorTabla.codigo" />
			<campoSalida value="descripcion_valor_tabla" target="valorTabla.descripcion" />

			<campoSalida value="valor_string" target="valorString" />
			<campoSalida value="valor_entero" target="valorEntero" />
			<campoSalida value="valor_doble" target="valorDoble" />
			<campoSalida value="valor_boolean" target="valorBoolean" />
			
			<campoSalida value="oid_caracteristica_producto" target="caracProducto.id" />
			<campoSalida value="codigo_caracteristica_producto" target="caracProducto.codigo" />
			<campoSalida value="descripcion_caracteristica_producto" target="caracProducto.descripcion" />
			<campoSalida value="oid_tabla_caracteristica_producto" target="caracProducto.tabla.id" />
			<campoSalida value="codigo_tabla_caracteristica_producto" target="caracProducto.tabla.codigo" />

		</output>		
			
		<listas>
			<lista nombreLista="caracteristicas" nombreWriter="tablaCaracteristicas"  />
		</listas>	
			
		<transformer clase="com.jkt.transformers.ParalelResponseListenerTransformer"></transformer>
		
		<forms>
			<form name="FormEquipo"></form>
		</forms>
	
	</operacion>


	<!-- DIAGNOSTICO -->
	<!-- Persistir instancias de diagnostico -->
	<operacion name="GuardarDiagnostico" clase="com.jkt.operaciones.GuardarLista">
		<input name="tablaDiagnostico" keyName="objeto" clase="com.jkt.laboratorio.dominio.Diagnostico" fieldID='oid_diagnostico'>
			<campoEntrada>
				<campoEntrada name="codigo" clase="String" metodo="setCodigo" />
				<campoEntrada name="oid_laboratorio" clase="com.jkt.laboratorio.dominio.Laboratorio" metodo="setLaboratorio" />
				<campoEntrada name="descripcion" clase="String" metodo="setDescripcion" />
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />
			</campoEntrada>
		</input>

		<forms>
			<form name="FormDiagnostico"></form>
		</forms>

	</operacion>

	<!-- Traer diagnosticos -->
	<operacion name="TraerDiagnosticos" clase="com.jkt.operaciones.TraerEntidades" entidad="com.jkt.laboratorio.dominio.Diagnostico">
		<output name="resultado" tableName="tablaDiagnostico">
			<campoSalida value="oid_diagnostico" target="id" />
			<campoSalida value="codigo__diagnostico" target="codigo" />
			<campoSalida value="descripcion_diagnostico" target="descripcion" />
			<campoSalida value="activo" target="isActivo" />
		</output>

		<transformer clase="com.jkt.transformers.SimpleTransformer" />

		<forms>
			<form name="FormLaboratorio"></form>
		</forms>
	</operacion>
	
	
<!-- CREACION DE UN PROTOCOLO -->
<!-- CREACION DE UN PROTOCOLO -->
<!-- CREACION DE UN PROTOCOLO -->
<!-- CREACION DE UN PROTOCOLO -->
<!-- CREACION DE UN PROTOCOLO -->
	<operacion name="GuardarProtocolo" clase="com.jkt.operaciones.GuardarLista">
		<input name="tablaProtocolo" keyName="objeto" clase="com.jkt.laboratorio.dominio.Protocolo" fieldID='oid_protocolo'>
			<campoEntrada>

				<campoEntrada name="oid_tipo_comprobante" clase="com.jkt.dominio.TipoComprobante" metodo="setTipoComprobante" />
				<campoEntrada name="oid_cliente_sucursal" clase="com.jkt.erp.varios.ClienteSucursal" metodo="setClienteSucursal" />
				<campoEntrada name="oid_equipo" clase="com.jkt.laboratorio.dominio.Equipo" metodo="setEquipo" />
				<campoEntrada name="oid_laboratorio" clase="com.jkt.laboratorio.dominio.Laboratorio" metodo="setLaboratorio" />
				<campoEntrada name="comentario" clase="String" metodo="setComentario" />
				<campoEntrada name="oid_estado" clase="Integer" metodo="setEstado" /> 

				<campoEntrada name="impreso" clase="Boolean" metodo="setImpreso" /> 
				<campoEntrada name="enviado" clase="Boolean" metodo="setEnviado" /> 
				<campoEntrada name="activo" clase="Boolean" metodo="setActivo" />

				<campoEntrada name="fechaHoraMuestra" clase="Date" metodo="setFechaHoraMuestra" /> <!-- aun no se soporta el datetime --> 
				
				<campoEntrada name="tablaDetalles" metodo="agregarDetalle" clase="com.jkt.laboratorio.dominio.ProtocoloDetalle" fieldID="oid_detalle">

					<campoEntrada name="oid_determinacion" clase="com.jkt.laboratorio.dominio.Determinacion" metodo="setResultado" />

				</campoEntrada>
	
			</campoEntrada>
		</input>

		<forms>
			<form name="FormProtocolo"></form>
		</forms>

	</operacion>
	
	
	
<!-- 	INGRESAR RESULTADOS DE ENSAYOS -->
<!-- 	INGRESAR RESULTADOS DE ENSAYOS -->
<!-- 	INGRESAR RESULTADOS DE ENSAYOS -->
<!-- 	INGRESAR RESULTADOS DE ENSAYOS -->
<!-- 	INGRESAR RESULTADOS DE ENSAYOS -->
	<operacion name="IngresarResultadosDeEnsayo" clase="com.jkt.operaciones.GuardarLista">
		<input name="tablaProtocolo" keyName="objeto" clase="com.jkt.laboratorio.dominio.Protocolo" fieldID='oid_protocolo'>
			<campoEntrada>
			
				<campoEntrada name="usuarioResultados" clase="com.jkt.dominio.Usuario" metodo="setUsuarioIngresoAprobacion" />
				<campoEntrada name="fechaHoraResultados" clase="Date" metodo="setFechaHoraResultado" />
				<campoEntrada name="oid_estado" clase="Integer" metodo="setEstado" /> <!-- pendiente de aprobacion -->
				<campoEntrada name="oid_diagnostico" clase="com.jkt.laboratorio.dominio.Diagnostico" metodo="setDiagnostico" />
				<campoEntrada name="comentarioDiagnostico" clase="String" metodo="setComentarioDiagnostico" />
			
				<campoEntrada name="tablaDetalles" metodo="agregarDetalle" clase="com.jkt.laboratorio.dominio.ProtocoloDetalle" fieldID="oid_detalle">

<!-- 					<campoEntrada name="oid_resultado" clase="com.jkt.laboratorio.dominio.Determinacion" metodo="setResultado" /> -->
					<campoEntrada name="comentario" clase="String" metodo="setComentario" />

					<campoEntrada name="tablaVariables" metodo="agregarVariable" clase="com.jkt.laboratorio.dominio.ProtocoloVariable" fieldID="oid_variable">
	
						<campoEntrada name="variable" clase="String" metodo="setVariable" />
						<campoEntrada name="valor" clase="String" metodo="setValor" />
	
					</campoEntrada>
					
				</campoEntrada>

	
			</campoEntrada>
		</input>

		<forms>
			<form name="FormProtocolo"></form>
		</forms>

	</operacion>

<!-- 	APROBAR RESULTADOS DE PROTOCOLO -->
<!-- 	APROBAR RESULTADOS DE PROTOCOLO -->
<!-- 	APROBAR RESULTADOS DE PROTOCOLO -->
<!-- 	APROBAR RESULTADOS DE PROTOCOLO -->
<!-- 	APROBAR RESULTADOS DE PROTOCOLO -->
	<operacion name="AprobarResultados" clase="com.jkt.operaciones.GuardarLista">
		<input name="tablaProtocolo" keyName="objeto" clase="com.jkt.laboratorio.dominio.Protocolo" fieldID='oid_protocolo'>
			<campoEntrada>
				<campoEntrada name="usuarioAprobacion" clase="com.jkt.dominio.Usuario" metodo="setUsuarioIngresoAprobacion" />
				<campoEntrada name="fechaHoraAprobacion" clase="Date" metodo="setFechaHoraAprobacion" />
				<campoEntrada name="oid_estado" clase="Integer" metodo="setEstado" /> <!--  Deberia ir terminado -->
			</campoEntrada>
		</input>

		<forms>
			<form name="FormProtocolo"></form>
		</forms>

	</operacion>
	
	
	
<!-- 	INSTANCIAR REPORTE -->
	<operacion name="CrearReporte" clase="com.jkt.laboratorio.operaciones.CrearDoc">
		<forms>
			<form name="FormProtocolo"></form>
		</forms>
	</operacion>
	


</entity>
