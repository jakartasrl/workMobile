<?xml version="1.0" standalone="yes"?>
<!DOCTYPE entity [

  <!ELEMENT entity        (operacion*)>
  <!ELEMENT operacion     (input* , output*,transformer)>
<!--   <!ELEMENT operacion     (input* , output* , dataset* , tables*, transformer?, forms)> -->
  
  <!ELEMENT input		  (campoEntrada*)>	<!--   Es la entrada de la operacion. Lo definido aquí llegará en un mapa a la operacion -->
  <!ELEMENT output		  (campoSalida*)> 	<!--   Define el formato de salida -->
  <!ELEMENT transformer	  EMPTY>			<!--   Define una clase que es la encargada de mostrar los resultados en la salida de la operacion. (Muchas tablas, una sola, en paralelo) -->
  
  <!ELEMENT listas		  (lista*)>			<!--   Son las listas para mostrar en la salida-->

  <!ELEMENT lista  (lista*)>  
  <!ATTLIST lista nombreWriter		CDATA    #REQUIRED>
  <!ATTLIST lista nombreLista       CDATA    #REQUIRED>


  <!ELEMENT campoEntrada  (input*|campoEntrada*)>  
  <!ELEMENT campoSalida   (campoSalida*,output*)>  
  
  <!ATTLIST transformer clase           CDATA #REQUIRED>
  
  <!ATTLIST input nameOV           	 	CDATA    "OV"><!--   Nombre que se corresponde con el name del objectview. -->
  <!ATTLIST input keyName           	CDATA    #IMPLIED><!--   Indica el key del mapa que llega a la operacion. Si el valor es 'leo', se debera recuperar usando la key 'leo' sobre el mapa en la operacion -->
  <!ATTLIST input clase           	 	CDATA    #IMPLIED><!-- 	define la clase del parmetro recibido -->
  <!ATTLIST input fieldID           	CDATA    "id"><!--   Define que atributo sera utilizado como id de la entida, esto es para recuperarlo de la base -->
  <!ATTLIST input nombreEntidad        	CDATA    #IMPLIED>
  
  <!ATTLIST campoEntrada metodo			CDATA #IMPLIED>
  <!ATTLIST campoEntrada name			CDATA #IMPLIED>
  <!ATTLIST campoEntrada propertyOV		CDATA #REQUIRED>
  <!ATTLIST campoEntrada fieldID        CDATA    "id"><!--   Define que atributo sera utilizado como id de la entida, esto es para recuperarlo de la base -->
 
 
  <!ATTLIST output name					CDATA "outputName"> <!-- Para web, nombre del objeto notificado a setear--> 
  <!ATTLIST output clase				CDATA #IMPLIED> <!-- Clase del tipo OV (vista) a la que se debe convertir el objeto-->
  
  <!ATTLIST campoSalida target			CDATA #IMPLIED> <!-- El nombre del metodo para recuperar los datos -->
  <!ATTLIST campoSalida value			CDATA #IMPLIED> <!-- el valor de la property que contendra el valor de resltado de target -->

  <!ATTLIST operacion name              ID    #REQUIRED>
  <!ATTLIST operacion clase             CDATA #IMPLIED>
  <!ATTLIST operacion entidad           CDATA #IMPLIED>
  <!ATTLIST operacion inputOV            CDATA #IMPLIED>
  <!ATTLIST operacion outputOV            CDATA #IMPLIED>
]>

<entity>
	
	<operacion name="buscarProductos" clase="com.jkt.operaciones.TraerProductos" outputOV="com.jkt.ov.ListDescriptibleOV" inputOV="com.jkt.ov.FiltroProductosOV">

		<input keyName="objeto" clase="com.jkt.dominio.FiltroProducto" >
			
			<campoEntrada propertyOV="codigo" 		metodo="setCodigo" />
			<campoEntrada propertyOV="descripcion" 	metodo="setDescripcion" />
			<campoEntrada propertyOV="oidTipoProducto" 	metodo="setOidTipoProducto" />
			
			<campoEntrada propertyOV="detallesTipoProducto" metodo="setDetallesTipoProducto" >
				<campoEntrada propertyOV="oid" 					metodo="setOid" />
				<campoEntrada propertyOV="codigo" 				metodo="setCodigo" />
				<campoEntrada propertyOV="descripcion" 			metodo="setDescripcion" />
				<campoEntrada propertyOV="tipo" 				metodo="setTipo" />
				<campoEntrada propertyOV="valorString" 			metodo="setValorString" />
				<campoEntrada propertyOV="valorEntero" 			metodo="setValorEntero" />
				<campoEntrada propertyOV="idValorCombo" 		metodo="setIdValorCombo" />
				<campoEntrada propertyOV="codigoCombo" 		metodo="setCodigoCombo" />
			</campoEntrada>
			
		</input>
		
		<output>

			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="campoAdicional1" value="campoAdicional1" />
			<campoSalida target="activo" value="activo" />
			
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />
		
	</operacion>

	<operacion name="TraerTiposDeProducto" clase="com.jkt.operaciones.TraerTiposDeProducto" outputOV="com.jkt.ov.ListDescriptibleOV">
		
		<output>

			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="activo" value="activo" />
			
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />
		
	</operacion>
	
	<operacion name="RecuperarDetallesCaracteristicaProducto" clase="com.jkt.operaciones.RecuperarDetallesCaracteristicaProducto" inputOV="com.jkt.ov.ContainerOV" outputOV="com.jkt.ov.ListDetalleCaracteristicaProductoListOV">
		
		<input>
			<campoEntrada propertyOV="string1" name="id"/>
		</input>
		
		<output>
			<campoSalida target="id" 			value="oid" />
			<campoSalida target="codigo" 		value="codigo" />
			<campoSalida target="descripcion" 	value="descripcion" />
			<campoSalida target="longitud" 		value="longitud" />
			<campoSalida target="tipo" 			value="tipo" />
				
			<campoSalida target="detallesFinal" value="detalles" >
				<campoSalida target="id" value="oid" />
				<campoSalida target="codigo" value="codigo" />
				<campoSalida target="descripcion" value="descripcion" />
			</campoSalida>

		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />
		
	</operacion>
	
	

	<operacion name="Traer" clase="com.jkt.operaciones.TraerEntidadesRelacionWeb" inputOV="com.jkt.ov.ContainerOV" outputOV="com.jkt.ov.ListDescriptibleOV">
		
		<input>
			<campoEntrada propertyOV="string1" name="entidad"/>
			<campoEntrada propertyOV="string2" name="id"/>
		</input>
		
		<output>

			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="activo" value="activo" />
			
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />
	</operacion>
	
	<operacion name="HelperConFiltro" clase="com.jkt.operaciones.HelperFiltros" inputOV="com.jkt.ov.ContenedorFiltrosOV" outputOV="com.jkt.ov.ListDescriptibleOV">

		<input keyName="objeto" clase="com.jkt.dominio.ContenedorFiltros" >
			
			<campoEntrada propertyOV="clase" name="ENTIDAD"/>
			
			<campoEntrada propertyOV="clase" metodo="setClase"/>
			
			<campoEntrada propertyOV="filtros" metodo="setFiltros" >
				<campoEntrada propertyOV="nombre" metodo="setNombre" />
				<campoEntrada propertyOV="valor" metodo="setValor" />
				<campoEntrada propertyOV="condicion" metodo="setCondicion" />
				<campoEntrada propertyOV="tipoDeDato" metodo="setTipoDeDato" />
			</campoEntrada>
			
		</input>

		<output>
			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="adicional1" value="campoAdicional1" />
			<campoSalida target="adicional2" value="campoAdicional2" />
			
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />

	</operacion>

	<operacion name="Helper" clase="com.jkt.operaciones.HelperActivos" inputOV="com.jkt.ov.HelperOV" entidad="com.jkt.dominio.Descriptible" outputOV="com.jkt.ov.ListDescriptibleOV">

		<input>
			<campoEntrada propertyOV="clase" name="ENTIDAD"/>
		</input>

		<output>
			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="adicional1" value="campoAdicional1" />
			<campoSalida target="adicional2" value="campoAdicional2" />
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />

	</operacion>
	

	<operacion name="HelperCompuesto" clase="com.jkt.operaciones.HelperCompuesto" inputOV="com.jkt.ov.HelperOV" entidad="com.jkt.dominio.Descriptible" outputOV="com.jkt.ov.ListDescriptibleOV">

		<input>
			<campoEntrada propertyOV="clase" name="ENTIDAD"/>
			<campoEntrada propertyOV="oidEntidadMaestra" name="OIDENTIDADMAESTRA"/>
		</input>

		<output>
			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
			<campoSalida target="adicional1" value="campoAdicional1" />
			<campoSalida target="adicional2" value="campoAdicional2" />
			
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />

	</operacion>

	<operacion name="ValidarEntidad" clase="com.jkt.operaciones.ValidarExistenciaSimple" inputOV="com.jkt.ov.ContainerOV" outputOV="com.jkt.ov.DescriptibleOV">

		<input>
			<campoEntrada propertyOV="string1" name="ENTIDAD"/>
			<campoEntrada propertyOV="string2" name="CODIGO"/>
			<campoEntrada propertyOV="string3" name="CAMPOVALIDADO"/>
		</input>

		<output>
			<campoSalida target="id" value="id" />
			<campoSalida target="codigo" value="codigo" />
			<campoSalida target="descripcion" value="descripcion" />
		</output>

		<transformer clase="com.jkt.transformers.WebTransformer" />

	</operacion>
	
</entity>