<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC 
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>

	<class name="com.jkt.dominio.ComprobanteVenta" table="COMPROBANTE_VENTA" abstract="true">

		<id name="id" column="COMPROBANTE_VENTA_ID">
			<generator class="hilo" />
		</id>
		
		<property name="activo" column="ACTIVO" type="boolean" />
		
		
<!-- 		<property name="comportamiento" column="COMPORTAMIENTO" /> -->
		<property name="lugarEmision" column="LUGAR_EMISION" />
		<property name="anulado" column="ANULADO" type="boolean" />
		<property name="nro" column="NUMERO" type="string" />
		
		<property name="fecha" column="FECHA" type="date" />

		<property name="letra" type="string">
            <column name="LETRA" length="1" />
        </property>

        <many-to-one name="tipoComprobante" class="com.jkt.dominio.TipoComprobante" column="TIPO_COMPROBANTE_ID"></many-to-one>
        
        <list name="archivos" table="ARCHIVO_COMPROBANTES" lazy="true" cascade="all">
			<key column="COMPROBANTE_VENTA_ID" />
			<index column="ORDEN" />
			<many-to-many class="com.jkt.varios.dominio.Especificacion" column="ARCHIVO_ID"/>
		</list>
		
		<many-to-one name="clienteSucursal" class="com.jkt.erp.varios.ClienteSucursal" column="CLIENTE_SUCURSAL_ID"></many-to-one>
		<many-to-one name="condicionPago" class="com.jkt.varios.dominio.CondPago" column="CONDICION_PAGO_ID"></many-to-one>

		<many-to-one name="vendedor" class="com.jkt.erp.varios.Vendedor" cascade="all" column="VENDEDOR_ID" />
		<many-to-one name="representante" class="com.jkt.erp.varios.Representante" cascade="all" column="REPRESENTANTE_ID" />






<!-- 		PEDIDO MAPPING -->
<!-- 		PEDIDO MAPPING -->
<!-- 		PEDIDO MAPPING -->
<!-- 		PEDIDO MAPPING -->
		<union-subclass name="com.jkt.pedido.dominio.Pedido" table="PEDIDO">
		</union-subclass>
		










<!-- 		COTIZACION MAPPING -->
<!-- 		COTIZACION MAPPING -->
<!-- 		COTIZACION MAPPING -->
<!-- 		COTIZACION MAPPING -->
	    <union-subclass name="com.jkt.dominio.Cotizacion" table="COTIZACION">
			<property name="estado" column="ESTADO" />

			<property name="fechaVencimiento" column="FECHA_VENCIMIENTO" type="date" />
			<property name="referencia" column="REFERENCIA" type="string" />
			<many-to-one name="contactoReferencia" class="com.jkt.varios.dominio.Contacto" column="CONTACTO_REFERENCIA_ID"></many-to-one>

			<list name="detalles" table="DETALLES_COTIZACION" lazy="true" cascade="all">
				<key column="COTIZACION_ID" />
				<index column="ORDEN" />
				<one-to-many class="com.jkt.dominio.CotizacionDet" />
			</list>

		</union-subclass>
		










<!-- 		PRESUPUESTO MAPPING -->
<!-- 		PRESUPUESTO MAPPING -->
<!-- 		PRESUPUESTO MAPPING -->
	    <union-subclass name="com.jkt.presupuesto.dominio.Presupuesto" table="PRESUPUESTO">

        	<many-to-one name="comprobanteRelacionado" class="com.jkt.dominio.Cotizacion" column="COMPROBANTE_RELACIONADO_ID"></many-to-one>

<!-- 			CAMPOS REPETIDOS DE LA COTIZACION, AUN NO SE SI IRAN EN EL PEDIDO, X ESO NO SE MAPEO ARRIBA EN LA SUPER CLASE -->
			<property name="referencia" column="REFERENCIA" type="string" />
			<many-to-one name="contactoReferencia" class="com.jkt.varios.dominio.Contacto" column="CONTACTO_REFERENCIA_ID"></many-to-one>
			
			
			<list name="notas" cascade="all" table="PRESUPUESTO_NOTAS">
				<key column="PRESUPUESTO_ID" />
				<index column="ORDEN" />
				<many-to-many column="NOTA_ID" class="com.jkt.presupuesto.dominio.Nota"/>
			</list>
			
			<list name="condicionesComerciales" cascade="all" table="PRESUPUESTO_CONDICIONES_COMERCIALES">
				<key column="PRESUPUESTO_ID" />
				<index column="ORDEN" />
				<many-to-many column="CONDICION_COMERCIAL_ID" class="com.jkt.presupuesto.dominio.CondicionComercial"/>
			</list>

			<many-to-one name="listaPrecios" class="com.jkt.dominio.ListaPrecios" column="LISTA_PRECIOS_ID"></many-to-one>

			<list name="detalles" table="DETALLES_PRESUPUESTO" lazy="true" cascade="all">
				<key column="PRESUPUESTO_ID" />
				<index column="ORDEN" />
				<one-to-many class="com.jkt.presupuesto.dominio.PresupuestoDet" />
			</list>

		</union-subclass>
		
		
		
	</class>

</hibernate-mapping>